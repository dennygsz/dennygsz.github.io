<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    LaTeX 公式语法速成 |  Hexo
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/css/style.css">

  
<script src="/js/pace.min.js"></script>


  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      <section class="outer">
  <article id="post-latex-formula-beginner" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  LaTeX 公式语法速成
</h1>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/01/latex-formula-beginner/" class="article-date">
  <time datetime="2020-02-01T14:04:00.000Z" itemprop="datePublished">2020-02-01</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%99%E7%A8%8B/">教程</a>
  </div>

      
      
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">5.9k字</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">22分钟</span>
        </span>
    </span>
</div>

      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p>说明：本文主要针对在 Markdown 中使用 LaTeX 公式的需求。</p>
</blockquote>
<p>原则上，针对日常的资料编写工作而言，Markdown 所提供的「有限」功能已经绰绰有余，足以让我们编写出高质量、有内涵的作品。然而，有一项功能，Markdown 自身并不支持——数学公式与符号的编排、显示。</p>
<p>在 Markdown 中，数学公式必须引入外部的插件来实现。一般，我们采用 <strong>LaTeX 公式语法</strong> 来撰写公式的内容，而利用 MathJax 引擎将公式代码转换为真正的符号与式子。</p>
<blockquote>
<p>LaTeX（正规的排版方式应该为 $$\mathrm{\LaTeX}$$）是一种文档排版代码/引擎，负责一整个文档的内容与排版。相关的内容将会在后续说明。这里仅涉及其中的<strong>公式功能</strong>，原因是：LaTeX 的整个系统以难学、难用著称，但 LaTeX 公式系统却被广泛使用，几乎成为各种文档环境中公式排版的第一或唯一方式。</p>
<p>换句话说：LaTeX 难学，没有需求时可先搁置一旁；但 LaTeX 的公式，却值得现在就花一点时间「速成」。</p>
</blockquote>
<h2 id="1-命令与环境"><a href="#1-命令与环境" class="headerlink" title="1 命令与环境"></a>1 命令与环境</h2><p>在编排公式时，先应几个来自于 LaTeX 的基本概念：</p>
<ol>
<li><strong>命令</strong>：有如一般编程语言中的「函数」，以反斜杠 <code>\</code> 开头，后接一串字母；整个命令直到一个非字母的字符截止。许多命令后往往还需要附带<strong>参数</strong>，它们通常会用一对花括号 <code>{}</code> 包围。</li>
<li><strong>环境</strong>：有如一般编程语言中的「函数体」或「语句体」，通常由一对命令 <code>\begin{xxx}</code> 与 <code>\end{xxx}</code> 包围起来，其中 <code>xxx</code> 就是这个环境的名称。除此之外，一些特殊的字符也应被视为环境的<strong>定界符</strong>，例如由一对美元号 <code>$...$</code> 括起来的内容也是一个环境。</li>
<li><strong>字符</strong>：LaTeX 对于不同的字符有非常详尽的处理方法，在公式的代码中一般有这样几类字符：<ul>
<li>特殊字符：如命令开头的反斜杠 <code>\</code>、标识环境的 <code>$</code>，以及 <code>_</code>、<code>^</code>、<code>&amp;</code> 等。它们有特殊的功能，不会以它们本身的样子显示在最终的公式中。</li>
<li>定界符：主要是花括号 <code>{}</code> 和环境命令 <code>\begin{xxx}...\end{xxx}</code>，它们决定了不同命令生效的范围，同样不会以本身的样子显示在最终的公式中。</li>
<li>空白字符（如空格与换行）：在 LaTeX 公式中，一般字符间的空白字符不会显示在最终的公式中。</li>
<li>一般字符：除了以上几类之外的其他字符，它们会原样显示在公式中（样式、位置、尺寸等则会有差异）。</li>
</ul>
</li>
</ol>
<p>例如，我们来看下面的一段 LaTeX 公式代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ I(x) &#x3D; \int_a^b f(x) \mathrm&#123;d&#125; x $</span><br></pre></td></tr></table></figure>

<p>其最终将生成公式 $$I(x) = \int_a^b f(x) \mathrm{d} x$$。依照上面所提的几条基本概念，我们对这一串看似复杂的代码进行拆解：</p>
<ul>
<li>代码中共出现了两个反斜杠 <code>\</code>，因此其中共计两个命令，分别是 <code>\int</code> 与 <code>\mathrm</code>，后者还紧跟着一个用花括号包围的参数 <code>d</code>。其实，<code>\int</code> 是积分（<strong>int</strong>egral）号命令，能够生成一个积分号（$$\int$$）；<code>\mathrm</code> 则是数学正体（<strong>math</strong>ematical <strong>r</strong>o<strong>m</strong>an style）命令，将其后的字符 $$d$$ 从公式默认的斜体（italic style）改为正体（$$\mathrm{d}$$）。</li>
<li>整个公式为一对美元号所包围，说明其被正常地包裹在「数学环境」之中。否则，代码将不会被渲染为公式。</li>
<li>除开确定环境的 <code>$</code> 符号，公式中还出现了两个特殊字符 <code>_</code> 与 <code>^</code>，它们分别表示「下标」与上标，并附属于之前的积分号命令 <code>\int</code>。<code>_</code> 号紧跟的字符 <code>a</code> 成为了积分号的下标（下限），而 <code>^</code> 号紧跟的字符 <code>b</code> 成为了积分号的上标（上限）。另外，如果你希望生成 $$\int_{12}^{24}$$ 这样上标与下标不止一个字符的公式，则应在 <code>_</code> 或 <code>^</code> 后将参数用花括号包起来：<code>\int_{12}^{24}</code>。</li>
<li>除开以上分析的特殊字符，其余的字符都将原样展示在公式中——正如我们所看到的那样。代码中的空格被忽略掉，渲染引擎会帮我们留出合适的间隙——在一般情况下。</li>
</ul>
<h2 id="2-常用命令与环境"><a href="#2-常用命令与环境" class="headerlink" title="2 常用命令与环境"></a>2 常用命令与环境</h2><p>LaTeX 公式排版的难点有二：</p>
<ol>
<li>如何确定用哪一类命令、环境排版公式；</li>
<li>这些命令和环境怎么写（具体的名称、参数表等比较难记）。</li>
</ol>
<p>这些问题会难住一些初学者，但读者应记住：只要花一段时间熟悉常见的命令与环境，并努力锻练打字能力，公式的排版将变得异常轻松。下面简单介绍一些最常用的命令、环境，之后会提供一些可供查阅的完整表格。</p>
<h3 id="2-1-符号命令分类"><a href="#2-1-符号命令分类" class="headerlink" title="2.1 符号命令分类"></a>2.1 符号命令分类</h3><p>公式中所需要的命令，无非两种：特殊数学符号（占绝大多数，如之前的 <code>\int</code>）、个别的样式调整（像之前的 <code>\mathrm</code> 一样）。前者又可进一步举例细分为如下几类：</p>
<ul>
<li><p><strong>希腊字母</strong>：出现频率很高。你只需要记得这些希腊字母的<strong>英文拼法</strong>就行，例如 <code>\alpha</code> 将显示为 $$\alpha$$，而 <code>\Gamma</code> 将生成 $$\Gamma$$。你可以在百度百科的<a href="https://baike.baidu.com/item/希腊字母" target="_blank" rel="noopener">对应页面</a>中查找不同希腊字母的「字母名称」，这就是紧跟在 <code>\</code> 后的命令名。（一些情景下已经支持直接输入 Unicode 希腊字符，例如在这个页面上的 <code>$α$</code> 代码可直接生成 $$α$$。）</p>
</li>
<li><p><strong>加减乘除</strong>：如果你的键盘上有，你可以直接打出；注意我们常用的乘号 $$\times$$ 应该用命令 <code>\times</code>，而除号 $$\div$$ 用命令 <code>\div</code>（divide）敲出（这两个符号在大学中是不常用的）。</p>
</li>
<li><p><strong>点号</strong>：一般可用垂直居中的 <code>\cdot</code>（$$\cdot$$，center dot）表示。如果需要将它们连成三个表示省略，则可以用 <code>\cdots</code>（$$\cdots$$） 与 <code>\ldots</code>（$$\ldots$$，lower dots），后者靠在下方。垂直三点 $$\vdots$$ 为 <code>\vdots</code>（vertical dots），对角线排列的三点 $$\ddots$$ 为 <code>\ddots</code>（diagonal dots）。</p>
</li>
<li><p><strong>比较符号</strong>：等号、大于号、小于号可直接打出，大于等于（greater or equivalent）可用 <code>\geq</code>（$$\geq$$）或 <code>\geqslant</code>（$$\geqslant$$，slant 表示一横的倾斜）两种风格，小于等于（less or equivalent）号类似：<code>\leq</code> 或 <code>\leqslant</code>。不等于号为 <code>\neq</code>（$$\neq$$）。近似可用 <code>\sim</code>（$$\sim$$，similar）或 <code>\approx</code>（$$\approx$$，approximate）等符号表示。</p>
</li>
<li><p><strong>集合关系</strong>：常用的有被包含 <code>\subset</code>（$$\subset$$，subset 表「子集」）与包含 <code>\supset</code>（$$\subset$$，super set 表「超集」）、真子集 <code>\nsubseteq</code>（$$\nsubseteq$$，not equivalent subset），属于 <code>\in</code>（$$\in$$）和不属于 <code>\notin</code>（$$\notin$$）、并 <code>\cup</code>（$$\cup$$，cup 表「杯子」形容了此符号的形状）、交 <code>\cap</code>（$$\cap$$，cap 表「帽子」，与前者恰好方向相反）。</p>
</li>
<li><p><strong>「大符号」</strong>：往往指那些纵向尺度较大、常有上下标的符号，包括积分号 <code>\int</code>（$$\int$$）、求和号 <code>\sum</code>（$$\sum$$）、连乘号 <code>\prod</code>（$$\prod$$，production）、集族并集号 <code>\bigcup</code>（$$\bigcup$$，与 <code>\cup</code> 的区别是它较大且可以有上下标）、集族交集号 <code>\bigcap</code>（$$\bigcap$$）等。</p>
</li>
<li><p><strong>定界符</strong>：通俗来说就是各种「括号」。圆括号、方括号可以直接用对应键打出。花括号 <code>{}</code> 被用于包藏参数、确定命令的作用范围，因此其不会显示在公式之中；如果要将其打出，则应使用 <code>\{</code> 与 <code>\}</code>，这里的反斜杠起到了「转义」的作用（像在很多编程语言中一样）。其他可用的还有：绝对值界 <code>|</code> 可直接打出；范数界 <code>\|</code>（$$|$$，其效果好于直接打两条竖线 <code>||</code>）；尖括号 <code>\langle</code> 与 <code>\rangle</code>（$$\langle$$ 与 $$\rangle$$，left angle 与 right angle）、上取整 <code>\lceil</code> 与 <code>\rceil</code>（$$\lceil$$ 与 $$\rceil$$，ceil 即「天花板」）、下取整 <code>\lfloor</code> 与 <code>\rfloor</code>（$$\lfloor$$ 与 $$\rfloor$$，floor 即「地板」）。</p>
</li>
<li><p><strong>算子</strong>：一般是用若干字母排列而成的函数名称，例如三角函数（<code>\sin</code>、<code>\cos</code>、<code>\tan</code>）、指数对数函数（<code>\exp</code>、<code>\log</code>、<code>\ln</code>）、最大值 <code>\max</code> 与最小值 <code>\min</code>、极限 <code>\lim</code> 等等。它们的共同特点是：命令中的字符，会以数学正体的形式显示出来，如 <code>\sin</code> 将显示为 $$\sin$$。它们都支持上下标。</p>
</li>
<li><p><strong>带参命令</strong>：即<strong>必须</strong>指定参数的命令，最常用的包括：</p>
<ul>
<li>分数（fraction）命令 <code>\frac{a+b}{c+d}</code> 生成 $$\frac{a+b}{c+d}$$，其中第一个参数为分子，第二个参数为分母。</li>
<li>组合数（binominal number，二项式系数）命令 <code>\binom{a+b}{c+d}</code> 生成 $$\binom{a+b}{c+d}$$，结构与分数类似。</li>
<li>根式（square root，平方根——但此命令不限于平方根）命令：<code>\sqrt[n]{x}</code> 生成 $$\sqrt[n]{x}$$，第一个用方括号包围的是次数（可以省略，此时表示平方根），第二个参数为被开根的内容。</li>
</ul>
</li>
</ul>
<p>几乎所有的符号命令，都可以归入以上的几个类别之中。读者如果能熟记以上所提到的这些符号，则可以在不查表的情况下应付 90% 的符号了。至于像无穷大号 <code>\infty</code>（$$\infty$$，infinity）等这种常用而不能归类的孤例，读者除了记住之外，也可以时常查阅以下给出的一些「符号表」</p>
<blockquote>
<p>这类表格大多数情况下没有用，少数情况下你要用——但找不到想要的符号。<del>所以，百度、Google 等搜索引擎无疑是最大赢家、幕后黑手。</del></p>
</blockquote>
<ul>
<li><a href="/BookHub/001.resources/symbols-a4.pdf">The Comprehensive LaTeX Symbol List</a>：包含了整个 LaTeX 系统中的特殊符号，数学符号仅为其一子集；所有需要的符号一定在这里，但你需要事先翻阅，弄清其复杂的结构.</li>
<li><a href="/BookHub/001.resources/latex-math-symbols.pdf">LaTeX Mathematical Symbols</a>：仅涉及常用的符号，基本够用。内容丰富。</li>
<li><a href="https://www.codecogs.com/latex/eqneditor.php" target="_blank" rel="noopener">Codecogs 公式编辑器</a>：一个在线编辑器，提供若干按钮，便于你通过图形化的页面找到所需的符号。境外网站，加载速度可能较慢。</li>
</ul>
<h3 id="2-2-样式调整命令"><a href="#2-2-样式调整命令" class="headerlink" title="2.2 样式调整命令"></a>2.2 样式调整命令</h3><p>另一类命令是样式调整命令。</p>
<p><strong>字体样式调整命令</strong>. 使用这些命令时，必须用花括号将待调整的内容包围——哪怕只有一个字符。</p>
<ul>
<li><p><code>\mathrm</code> 可能是最常用的一个，因为我们经常需要在默认为斜体的公式中插入正体字符（对单位、下标、自定义算子等）。不过，更推荐使用的是 <code>\text</code>；这个命令的机制并非单纯调整样式，但可以视为与 <code>\mathrm</code> 等价的命令，且比其更好用。</p>
</li>
<li><p>要打出表示数集的 $$\mathbb{R}$$、$$\mathbb{C}$$ 等镂空粗体（blackboard bold）字符，应使用 <code>\mathbb</code> 命令。</p>
</li>
<li><p>一般的粗体（bold font shape），可以用 <code>\mathbf</code> 命令打出，只不过该命令对字母和数字以外的字符无效。如有需要，可以尝试 <code>\boldsymbol</code> 与 <code>\bm</code> 等命令。</p>
</li>
<li><p>其他的特殊字体还有花体（calligraphical） <code>\mathcal</code> 与文本体（script） <code>\mathscr</code> 等，它们都在数学中常用，表示较高级别的范畴（如集族、映射族等等）。</p>
</li>
</ul>
<blockquote>
<p>以上这些命令，不一定在所有情况下都能使用。在 LaTeX 中，这涉及到宏包的问题；在其他场合下，则取决于所用的渲染工具是否支持相应的命令。</p>
</blockquote>
<p><strong>定界符调整命令</strong>. 定界符的大小一般是固定的，这时我们可能会碰到这样的情况：输入代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ f(x) &#x3D; ( \frac&#123;a^x&#125;&#123;b&#125; ) $</span><br></pre></td></tr></table></figure>

<p>将得到</p>
<p>$$ f(x) = ( \frac{a^x}{b} ) $$</p>
<p>很显然这里的括号太小了。为此，我们可以用一些命令来调整定界符的大小。精细的做法是采用不同等级的调整命令，例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ f(x) &#x3D; \Bigl( \frac&#123;a^x&#125;&#123;b&#125; \Bigr) $</span><br></pre></td></tr></table></figure>

<p>这里用一对命令 <code>\Bigl</code> 与 <code>\Bigr</code> 吸附在左右括号之前，调整了其大小。就像下面这样，令人满意。</p>
<p>$$ f(x) = \Bigl( \frac{a^x}{b} \Bigr) $$</p>
<p>这样的命令有很多，依次排成一个级别序列：<code>\big</code>、<code>\bigg</code>、<code>Big</code>、<code>\Bigg</code> 等。如果你对此不感兴趣，则可以在各种情况下都使用自动调整的 <code>\left</code> 与 <code>\right</code> 命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ f(x) &#x3D; \left( \frac&#123;a^x&#125;&#123;b&#125; \right) $</span><br></pre></td></tr></table></figure>

<p>这一对通用命令可以在大部分情况下解决你的问题，但有时会产生偏差。</p>
<h3 id="2-3-数学环境"><a href="#2-3-数学环境" class="headerlink" title="2.3 数学环境"></a>2.3 数学环境</h3><p>所有命令都必须在<strong>数学环境</strong>之中才能被渲染为公式。一般而言，有两大类环境：</p>
<ol>
<li>行内环境（inline）：顾名思义，指那些出现在文本行内的短小公式或符号。例如这里的公式 $$a+b=c$$ 便由行内数学环境所容纳。</li>
<li>行间环境（block 或 displayed）：较大的公式，从段落中分离出来独占一行，居中显示。例如以下的</li>
</ol>
<p>$$I(x) = \int_a^bf(x)\mathrm{d}x$$</p>
<p>（你可以比较这个公式跟第一个例子的显示效果有何差别。）</p>
<p>行内环境与行间环境的使用，取决于具体需要。下面给出了一些行内与行间环境的例子；此处不再絮叨这些环境的具体用法，但给出相应的链接供读者查看。</p>
<table>
<thead>
<tr>
<th>环境特性</th>
<th>命令或定界符</th>
<th>参考或备注</th>
</tr>
</thead>
<tbody><tr>
<td>行内环境</td>
<td><code>$...$</code> 或 <code>\(...\)</code></td>
<td>最简单的一种</td>
</tr>
<tr>
<td>行间环境，不标号</td>
<td><code>$$ ... $$</code> 或 <code>\[\]</code></td>
<td>不能换行</td>
</tr>
<tr>
<td>行间环境，标号</td>
<td><code>\begin{equation} ... \end{equation}</code></td>
<td>不能换行</td>
</tr>
<tr>
<td>行间可换行，标号，不对齐</td>
<td><code>\begin{gather} ... \end{gather}</code></td>
<td><a href="https://liam.page/2014/09/08/latex-introduction/" target="_blank" rel="noopener">此博文</a>的「8.8.2. 公式组」</td>
</tr>
<tr>
<td>行间可换行，标号，对齐</td>
<td><code>\begin{align} ... \end{align}</code></td>
<td><a href="https://liam.page/2014/09/08/latex-introduction/" target="_blank" rel="noopener">此博文</a>的「8.8.2. 公式组」</td>
</tr>
<tr>
<td>行间内嵌对齐环境</td>
<td><code>\begin{aligned} ... \end{aligned}</code></td>
<td>必须嵌在已有的行间环境内；参考<a href="https://liam.page/2014/09/08/latex-introduction/" target="_blank" rel="noopener">此博文</a>的「8.8.1.2. 对齐」</td>
</tr>
<tr>
<td>行间内嵌条件环境（左侧自带一花括号）</td>
<td><code>\begin{cases} ... \end{cases}</code></td>
<td>必须嵌在已有的行间环境内；参考<a href="https://liam.page/2014/09/08/latex-introduction/" target="_blank" rel="noopener">此博文</a>的「8.8.3. 分段函数」</td>
</tr>
</tbody></table>
<blockquote>
<p>一般的，在某一数学环境中，如果可能的话，<code>&amp;</code> 将表示「从此处开始与上下对齐」，而 <code>\\</code> 将表示「在此处换行」。</p>
</blockquote>
<p>以上这些公式环境，都是针对在 LaTeX 系统之外使用 LaTeX 公式而言的。部分引擎可能不支持以上的一些写法，或要求所有环境都要包在某一类定界符（如一对 <code>$</code>）下，请读者留意。</p>
<h3 id="2-4-矩阵"><a href="#2-4-矩阵" class="headerlink" title="2.4 矩阵"></a>2.4 矩阵</h3><p>矩阵是一类特殊的内嵌数学环境。通用的写法是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;matrix&#125;</span><br><span class="line">a &amp; b &amp; c\\</span><br><span class="line">d &amp; e &amp; f</span><br><span class="line">\end&#123;matrix&#125;</span><br></pre></td></tr></table></figure>

<p>注意这里的 <code>matrix</code> 环境要放在一个行间环境中。以上命令将生成</p>
<p>$$\begin{matrix}<br>a &amp; b &amp; c\<br>d &amp; e &amp; f<br>\end{matrix}$$</p>
<p>通常当我们使用矩阵时，都需要指定一个定界符。固然，我们可以用 <code>matrix</code> 环境外加两侧的自动定界符 <code>\left</code> 与 <code>\right</code> 等实现，但这过于繁琐。简要的方法是使用一些预定义、自带定界符的环境，包括：</p>
<ul>
<li>自带圆括号 $$()$$ 的 <code>pmatrix</code> 环境；</li>
<li>自带方括号 $$[]$$ 的 <code>bmatrix</code> 环境；</li>
<li>自带花括号 $${}$$ 的 <code>Bmatrix</code> 环境；</li>
<li>自带绝对值界的 <code>vmatrix</code> 环境与自带范数界的 <code>Vmatrix</code> 。</li>
</ul>
<p>只需要将上面的 <code>matrix</code> 替换即可。此外，若要在行间打印小矩阵（如 $$\left(\begin{smallmatrix}a&amp;b\c&amp;d\end{smallmatrix}\right)$$，则可使用 <code>smallmatrix</code> 环境（定界符必须自己添加）。</p>
<h3 id="2-5-上下标"><a href="#2-5-上下标" class="headerlink" title="2.5 上下标"></a>2.5 上下标</h3><p>上下标是除开特殊符号外最常用的一类操作，无处不在。在第一个公式样例中，我们已经说明：</p>
<ul>
<li><code>_</code> 符号后紧跟一个字符（或用一对 <code>{}</code> 包起来的若干内容），将为其之前的命令或符号添加对应下标；</li>
<li><code>^</code> 与之机制类似，不过生成的是上标。</li>
</ul>
<p>一般而言，这样两类对象会经常用到下标：</p>
<ul>
<li><p>单个字符（$$2^3$$、$$x_i$$）、定界符 – 包括矩阵的定界符（$$|\mathbf{x}|_2$$、$$\left(\begin{smallmatrix}a&amp;b\c&amp;d\end{smallmatrix}\right)^\mathrm{T}$$）；</p>
</li>
<li><p>「大符号」（$$\sum\limits_{k=0}^N$$）、算子（$$\max\limits_{x\in X}p(x)$$）。</p>
</li>
</ul>
<p>这里分为两类的依据是：前者的上下标通常在主体符号的斜上方、斜下方，而后者的上下标通常在主体的正上方、正下方（「大符号」中的积分号除外，大多数人倾向于用侧旁的上下标）。这些符号在配置上下标时，通常会有一个默认设置，该设置与符号本身、所处环境类别（行内或行间）都有关，例如默认的行间求和号用的却是斜侧上下标：$$\sum_{k=0}^N$$，并不雅观。</p>
<p>你可以在主体符号后紧跟一个 <code>\limits</code> 命令（不要放在别的位置），使上下标切换至正上方、正下方；反之，紧跟一个 <code>\nolimits</code> 命令，将使它们切换至侧旁位置。</p>
<blockquote>
<p><code>\limits</code> 可以理解为：按照极限号通常的写法（$$\lim\limits_{x\to\infty}$$）来组织上下标。</p>
</blockquote>
<h2 id="3-用「拆解法」处理公式"><a href="#3-用「拆解法」处理公式" class="headerlink" title="3 用「拆解法」处理公式"></a>3 用「拆解法」处理公式</h2><p>在掌握各种公式、环境之后，编写公式就已经是小 case 了，几乎不需要再做练习。以下提供一种名为「拆解法」的思路，供读者参考；它代表了排版一个公式时的一般思路，可以无障碍的复制到其他情形之下。</p>
<p>例如，考虑以下一个公式，它来自于对流体力学中 Navier-Stokes 基本方程的研究：</p>
<p>$$ \begin{aligned}<br>&amp; \iint_{ \mathbb{R}^3 \times (0, +\infty) }\left{ - \sum_{i=1}^3 u_i \frac{\partial \theta_i}{\partial t} - \sum_{i,j=1}^3 u_i u_j \left( \frac{\partial \theta_i}{\partial x_j}\right) \right} \mathrm{d}x \mathrm{d}t \<br>= &amp; \iint_{ \mathbb{R}^3 \times (0, +\infty) }\left{ \nu \sum_{i,j=1}^3 \left( \frac{\partial^2}{\partial x_j^2} \theta_i \right) u_i + \left( \sum_{i=1}^3 \frac{\partial \theta_i}{\partial x_i} \right) p \right} \mathrm{d}x \mathrm{d}t<br>\end{aligned} $$</p>
<p>让我们依次来拆解这个公式，确定其代码。</p>
<ol>
<li><p><strong>环境</strong>：易见这是一个行间公式，并且有一个对齐的换行（对齐了二重积分号 <code>\iint</code>）。所以应该采用这样的环境包围公式：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$$ \begin&#123;aligned&#125;</span><br><span class="line">&amp; \\</span><br><span class="line">&amp;</span><br><span class="line">\end&#123;aligned&#125; $$</span><br></pre></td></tr></table></figure>
<p> 即行间公式嵌入对齐子环境。</p>
</li>
<li><p><strong>层级结构</strong>：细数第一行（第二行类似）的定界符，发现最多只有两层：一组花括号包裹一组圆括号，并伴有一些求和号。由于定界符内有分数结构 <code>\partial</code>，故需用 <code>\left</code> 与 <code>\right</code> 命令调整定界符大小。在花括号外，左侧有一个双重积分号 <code>\iint</code>，右侧有两个微元 <code>\mathrm{d}x</code>、<code>\mathrm{d}t</code>。那么，可以初步写出两公式的层级结构：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$$ \begin&#123;aligned&#125;</span><br><span class="line">  &amp; \iint \left\&#123; - \sum \frac&#123;&#125;&#123;&#125; - \sum \left( \frac&#123;&#125;&#123;&#125; \right) \right\&#125; \mathrm&#123;d&#125;x \mathrm&#123;d&#125;t \\</span><br><span class="line">&#x3D; &amp; \iint \left\&#123; \sum \left( \frac&#123;&#125;&#123;&#125; \right) +\left( \sum \frac&#123;&#125;&#123;&#125; \right) \right\&#125; \mathrm&#123;d&#125;x \mathrm&#123;d&#125;t</span><br><span class="line">\end&#123;aligned&#125; $$</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>填入符号</strong>：除开定界符、「大符号」之外，还有一些必要的普通符号。依次填入，并同时补上所有的上下标——在 LaTeX 中，上下标「顺水推舟」地附属于之前的符号，不需要专门规划其结构。</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$$ \begin&#123;aligned&#125;</span><br><span class="line">  &amp; \iint_&#123; \mathbb&#123;R&#125; \times (0, +\infty) &#125; \left\&#123; - \sum_&#123;i&#x3D;1&#125;^3 u_i \frac&#123;\partial \theta_i&#125;&#123;\partial t&#125; - \sum_&#123;i,j&#x3D;1&#125;^3 u_i u_j\left( \frac&#123;\partial \theta_i&#125;&#123;\partial x_j&#125; \right) \right\&#125; \mathrm&#123;d&#125;x \mathrm&#123;d&#125;t \\</span><br><span class="line">&#x3D; &amp; \iint_&#123; \mathbb&#123;R&#125; \times (0, +\infty) &#125; \left\&#123; \nu \sum_&#123;i,j&#x3D;1&#125;^3 \left( \frac&#123;\partial^2&#125;&#123;\partial x_j^2&#125; \theta_i \right) u_i +\left( \sum_&#123;i&#x3D;1&#125;^3 \frac&#123;\partial \theta_i&#125;&#123;\partial x_i&#125; p \right) \right\&#125; \mathrm&#123;d&#125;x \mathrm&#123;d&#125;t</span><br><span class="line">\end&#123;aligned&#125; $$</span><br></pre></td></tr></table></figure>
<p> 由此即完成了公式的编写。这里的各个符号命令（如偏微分算子 <code>\partial</code>、各个希腊字母、二重积分号 <code>\iint</code>），都属于最常用的命令，读者应该在浏览过几次命令表格后将它们熟记。</p>
</li>
</ol>
<p>以上这种分层拆解的方法，有利于初学者快速弄清一个复杂公式的代码结构，以尽可能少的错误、重复工作来完成公式的编写。待读者技术熟练之后，则不需要再这样从外至内的分层编写，而可以<del>用一种「大江东去浪涛尽」的宏伟气势</del>从头写到尾，中间基本上不会碰到什么问题——除了括号未配对、拼写错误、少打个别字符等。</p>
<blockquote>
<p>在编写技术相对熟练之后，一种提高效率的手段是：压缩空格与大括号的数量（如上面一段代码中的空格大多可以去掉）。具体细节在此不详述，读者可以自行尝试——当然，提高效率的同时，会影响之后对公式代码的复查。</p>
</blockquote>
<h2 id="4-MathJax-引擎的使用"><a href="#4-MathJax-引擎的使用" class="headerlink" title="4 MathJax 引擎的使用"></a>4 MathJax 引擎的使用</h2><p>在 LaTeX 系统之外的地方（例如本页面上），如何渲染 LaTeX 公式代码呢？在种种其他的应用场景之中，网页（包括 Markdown 文档）是最为重要的一个，因此网页端的 LaTeX 渲染最值得我们关注。</p>
<p>早先，仿照着已经大获成功的 HTML、XML 等文档格式标准，万维网联盟（W3C）指定了「数学标记语言」<strong>MathML</strong>。其「条理清晰、逻辑严密」，只可惜格式过于复杂，难以自行撰写。例如，对于二次方程的求根公式：</p>
<p>$$ x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a} $$</p>
<p>我们知道 LaTeX 代码中只需一小段代码就能解决，而 MathML 却需要这样实现：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">math</span> <span class="attr">mode</span>=<span class="string">"display"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1998/Math/MathML"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mrow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mi</span>&gt;</span>x<span class="tag">&lt;/<span class="name">mi</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mo</span>&gt;</span>=<span class="tag">&lt;/<span class="name">mo</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mfrac</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mrow</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mo</span> <span class="attr">form</span>=<span class="string">"prefix"</span>&gt;</span><span class="symbol">&amp;#x2212;</span><span class="comment">&lt;!-- − --&gt;</span><span class="tag">&lt;/<span class="name">mo</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mi</span>&gt;</span>b<span class="tag">&lt;/<span class="name">mi</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mo</span>&gt;</span><span class="symbol">&amp;#x00B1;</span><span class="comment">&lt;!-- &amp;PlusMinus; --&gt;</span><span class="tag">&lt;/<span class="name">mo</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">msqrt</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">msup</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mi</span>&gt;</span>b<span class="tag">&lt;/<span class="name">mi</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mn</span>&gt;</span>2<span class="tag">&lt;/<span class="name">mn</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">msup</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mo</span>&gt;</span><span class="symbol">&amp;#x2212;</span><span class="comment">&lt;!-- − --&gt;</span><span class="tag">&lt;/<span class="name">mo</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mn</span>&gt;</span>4<span class="tag">&lt;/<span class="name">mn</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mo</span>&gt;</span><span class="symbol">&amp;#x2062;</span><span class="comment">&lt;!-- &amp;InvisibleTimes; --&gt;</span><span class="tag">&lt;/<span class="name">mo</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mi</span>&gt;</span>a<span class="tag">&lt;/<span class="name">mi</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mo</span>&gt;</span><span class="symbol">&amp;#x2062;</span><span class="comment">&lt;!-- &amp;InvisibleTimes; --&gt;</span><span class="tag">&lt;/<span class="name">mo</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mi</span>&gt;</span>c<span class="tag">&lt;/<span class="name">mi</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">msqrt</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">mrow</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mrow</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mn</span>&gt;</span>2<span class="tag">&lt;/<span class="name">mn</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mo</span>&gt;</span><span class="symbol">&amp;#x2062;</span><span class="comment">&lt;!-- &amp;InvisibleTimes; --&gt;</span><span class="tag">&lt;/<span class="name">mo</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mi</span>&gt;</span>a<span class="tag">&lt;/<span class="name">mi</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">mrow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mfrac</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mrow</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">annotation</span> <span class="attr">encoding</span>=<span class="string">"TeX"</span>&gt;</span></span><br><span class="line">     x=\frac&#123;-b \pm \sqrt&#123;b^2 - 4ac&#125;&#125;&#123;2a&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">annotation</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">annotation</span> <span class="attr">encoding</span>=<span class="string">"StarMath 5.0"</span>&gt;</span></span><br><span class="line">     x=&#123;-b plusminus sqrt &#123;b^2 - 4 ac&#125;&#125; over &#123;2 a&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">annotation</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">math</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>换句话说：这种格式是给机器看的，不是给人看、给人用的。它实现了很多额外功能，例如加入了 (La)TeX、StarMath 等公式系统中的对应代码，但我们对此并不感兴趣。</p>
<p>鉴于 W3C 对于 XML 格式的这种执念，许多替代方案衍生出来，目前最通行的便是由美国数学学会（AMS，早先他们也曾对 LaTeX 的公式系统做出过巨大贡献）维护的 <strong>MathJax</strong> 引擎。与标记语言 MathML 不同，MathJax 并不打算重新设计公式的编码，而是直接将页面上的 LaTeX 公式代码渲染成可以显示在网页上的<strong>公式对象</strong>。</p>
<p>在网页上引入 MathJax 的脚本、配置之后，其将自动执行「翻译」LaTeX 代码的功能，无需再多操心。目前，大多数 Markdown 编译器都采用 MathJax 引擎渲染公式。</p>
<p>总之，对于读者而言，只需记住：<strong>在支持 MathJax 的系统下，可以像在 LaTeX 系统中一样输入公式，没有太大差别。</strong></p>

      
      <!-- 打赏 -->
      
      <div id="reward-btn">
        打赏
      </div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/01/latex-formula-beginner/" data-id="ck63octmk00014go0a3841w7y"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LaTex/" rel="tag">LaTex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a></li></ul>

    </footer>

  </div>

  
  
  <nav class="article-nav">
    
    
      <a href="/2020/02/01/typeset-standard/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">Markdown 资料排版规范</div>
      </a>
    
  </nav>


  

  
  
<!-- valine评论 -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        notify: false,
        verify: '',
        app_id: '',
        app_key: '',
        path: window.location.pathname,
        avatar: 'mp',
        placeholder: '给我的文章加点评论吧~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
  

</article>
</section>
      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2020
        Denny Gavin Zhang
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Hexo"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">所有文章</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipaypay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.png">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
      
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>
<script>
  var typed = new Typed("#subtitle", {
    strings: ['青春是一场勤奋的较量','Youth is a race of diligence','Powered by Denny Gavin Zhag'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
</script>




<script src="/js/tocbot.min.js"></script>

<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer:'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    onClick: (e) => {
      $('.toc-link').removeClass('is-active-link');
      $(`a[href=${e.target.hash}]`).addClass('is-active-link');
      $(e.target.hash).scrollIntoView();
      return false;
    }
  });
</script>


<script>
  var ayerConfig = {
    mathjax: false
  }
</script>


<script src="/js/ayer.js"></script>


<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>